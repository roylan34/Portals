var dtArchiveInventory={dtInstance:null,selectedBranch:null,pageDetails:function(){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Archive</small>"),this},render:function(t,n,e){return this.dtInstance=$("#dtArchiveInventory").DataTable({initComplete:function(){autoDrpDownInvnt.getType("#search-invnt-type").getCondition("#search-invnt-bnrf"),autoDrpDown.getBrandName("#search-invnt-brand").getCategory("#search-invnt-category")},dom:"Bl<'dropdown-branch col-md-3 col-xs-12'>rtip",ordering:!1,autoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{processing:!0,loadingRecords:'<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><span class="sr-only">Please wait - loading...</span>',infoEmpty:"No entries to show"},destroy:!0,responsive:!0,buttons:[{extend:"excel",className:"btn-excel-inventory hidden-xs",exportOptions:{columns:[1,2,3,4,5,6,7]},filename:"Archive Inventory "+getTodayDate()},{extend:"print",exportOptions:{columns:[0,1,2,3,4,5,6,7]},className:"btn-print-inventory hidden-xs",customize:function(t){var n=$(t.document.body);n.find("h1").remove(),n.prepend("<h4>Machine Archive Stocks</h4>")}},{text:"Open Search Filter",className:"btn-search-inventory",action:function(t,n,e,a){$("#dthead-search-invnt").slideToggle("fast",function(){$(this).is(":visible")?e[0].innerText="Close Search Filter":(e[0].innerText="Open Search Filter",dtArchiveInventory.dtInstance.ajax.reload(null,!0))})}}],ajax:{url:assets+"php/inventory/inventory.php",type:"POST",data:function(t){var e=$("#archive-invnt-branchlist option:selected").val();t.status_type="OUT",t.action="view-all",t.branch=1==n?e:n}},columns:[{data:null},{data:"serialnumber"},{data:"brand_name"},{data:"model"},{data:"cat_name"},{data:"type_name"},{data:"location"},{data:"company_name"},{data:"date_entered"},{data:"acronym_name"},{data:null,width:"30px"},{data:null,width:"30px"}],columnDefs:[{targets:0,render:function(t,n,e,a){return a.row+1}},{targets:10,render:function(t,n,e,a){return'<a href="#" title="IN MACHINE" data-toggle="modal" data-target="#modalFormInMachine" class="btn btn-success btn-flat btn-xs btn-in-inventory" data-id-machine="'+t.id+'" data-id-company="'+t.id_company+'">IN</a>'}},{targets:11,render:function(t){return'<a title="STATUS LOGS" class="btn btn-xs btn-default-logs btn-flat viewInvntStatusLogs" data-id-machine-logs="'+t.id+'"><i class="fa fa-clock-o"></i></a>'}}],fnDrawCallback:function(t){var n=JSON.parse(Cookies.get("app_module_action"));return null==n?$(".viewInvntStatusLogs, .btn-in-inventory").remove():"r"==n.action_invnt&&$(".viewInvntStatusLogs, .btn-in-inventory").remove(),!1},preDrawCallback:function(t){$(".btn-search-inventory, .btn-excel-inventory, .btn-print-inventory").removeClass("dt-button").addClass("btn btn-primary btn-flat btn-sm").css({"margin-bottom":"0.5em","margin-right":"0.5em"}),$(".btn-print-inventory").text("").html("<i class='glyphicon glyphicon-print'></i>").attr("title","Print"),$(".btn-excel-inventory").text("").html("<i class='fa fa-file-excel-o'></i>").attr("title","Export to Excel")}}),this},selectBranch:function(t,n){return 1==t&&1==n&&($("div.archive-invnt-branches").html('<label>Branch: <select id="archive-invnt-branchlist" style="padding:2px 4px"></select></label> '),autoDrpDownInvnt.getBranch("#archive-invnt-branchlist",null,[1],2),$("select#archive-invnt-branchlist").change(function(){dtArchiveInventory.dtInstance.ajax.reload()})),this},modalShowInMachine:function(){return $("#displayFormInvntInOutMachine").load(pages+"inventory/archive/form-in.html",function(t){autoDrpDownInvnt.getStatus("#slctArchInvntStatus","IN"),$("#txtArchInvntDateIn").inputmask()}),this},inMachine:function(t){var n=$("button[type='submit']"),e=$("#hdnInvntInId").val(),a=$("#slctArchInvntStatus option:selected").val(),r=$("#hdnInvntInCompanyId").val(),s=$("#txtArchInvntDateIn").val(),o=$("#txtArchInvntRemarks").val(),l=$("#hdnInvntInSerial").val(),i={action:"update_in",id_machine:e,status:a,company:r,date:s,remarks:o,id_user:Cookies.get("user_id"),serialnum:l};$.ajax({type:"POST",url:assets+"php/inventory/inventory.php",data:i,dataType:"json",beforeSend:function(){n.button("loading")},success:function(t,n,e){self.dtArchiveInventory.dtInstance.ajax.reload(function(){promptMSG("success-retrieve","Machine",null,null,!1),$(".mif-modalPromptMSG").on("click","button",function(){$("#modalFormInMachine").modal("hide")})},!0)},error:function(t,n){alert(t+n)},complete:function(){n.button("reset")}})},getCompanyName:function(t){if(""!=t){var n=$("button[type='submit']");$.ajax({type:"POST",url:assets+"php/inventory/inventory.php",data:{action:"get-company-name",id_machine:t},dataType:"json",beforeSend:function(){n.button("loading")},success:function(t,n,e){$.each(t.aaData,function(t,n){$("#hdnInvntInCompanyId").val(n.id),$("#slctArchInvntCompany").text(n.company_name),$("#hdnInvntInSerial").val(n.serialnumber)})},error:function(t,n){alert(t+n)},complete:function(){n.button("reset")}})}else alert("ID is empty");return this},actions:function(){return $("#archiveInventoryList").on("click","a.btn-in-inventory, button.dt-invnt-refresh, a.viewInvntStatusLogs",function(t){t.preventDefault();var n=$(this);if(n.closest("tr").hasClass("selected")||(self.dtArchiveInventory.dtInstance.$("tr.selected").removeClass("selected"),n.closest("tr").addClass("selected")),$(n[0]).hasClass("btn-in-inventory")){var e=$(n[0]).data("id-machine")||"";$("#hdnInvntInId").val(e),self.dtArchiveInventory.getCompanyName(e)}else if($(n[0]).hasClass("dt-invnt-refresh")){var a=Cookies.get("branch"),r=JSON.parse(Cookies.get("app_module"));self.dtArchiveInventory.render(r.invnt,a)}else{if(!$(n[0]).hasClass("viewInvntStatusLogs"))return!1;e=n.data("id-machine-logs");dtInvntLogs.showModal(e)}}),this}},dtCurrentInvtHq={dtInstance:null,selectedBranch:null,pageDetails:function(){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Current</small>"),this},render:function(){return this.dtInstance=$("#dtCurrentInvtHq").DataTable({initComplete:function(){autoDrpDown.getBrandName(".search-hq-brand")},dom:"Bl<'dropdown-bulk col-md-3 col-xs-12'>rtip",ordering:!1,autoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],pageLength:25,serverSide:!0,processing:!0,language:{processing:'<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i><span class="sr-only">Please wait - loading...</span>',infoEmpty:"No entries to show"},destroy:!0,responsive:!0,buttons:[{extend:"excel",className:"btn-excel-inventory hidden-xs",exportOptions:{columns:[1,2,3,4,5]},filename:"SAP - BN Stocks HO "+getTodayDate()},{extend:"print",exportOptions:{columns:[0,1,2,3,4,5]},className:"btn-print-inventory hidden-xs",customize:function(t){var n=$(t.document.body);n.find("h1").remove(),n.prepend("<h4>SAP - BN Stocks HO</h4>")}},{text:"Open Search Filter",className:"btn-search-inventory",action:function(t,n,e,a){$(".dthead-search-invnt-hq").slideToggle("fast",function(){$(this).is(":visible")?e[0].innerText="Close Search Filter":(e[0].innerText="Open Search Filter",$(".dt-head-search input[type='text'], .dt-head-search select").val(""),dtCurrentInvtHq.dtInstance.ajax.reload(null,!0))})}}],ajax:{url:assets+"php/inventory/sapHQInventory.php",type:"POST",dataSrc:"records",data:function(t){t.serialnumber=$(".search-hq-serial").filter(":visible").val()||"",t.brand=$(".search-hq-brand:visible option:selected").val()?$(".search-hq-brand:visible option:selected").text():"",t.model=$(".search-hq-model").filter(":visible").val()||"",t.location=$(".search-hq-location").filter(":visible").val()||"",t.date=$(".search-hq-date").filter(":visible").val()||""}},columns:[{data:null,width:"20px",render:function(t,n,e,a){return a.row+1}},{data:"serialnumber",width:"160px"},{data:"id_brand",width:"160px"},{data:null,width:"160px",render:function(t){return t.model||"---"}},{data:null,width:"160px",render:function(t){return t.location||"---"}},{data:null,width:"160px",render:function(t){return t.date_entered||"---"}},{data:null,width:"160px",render:function(){return""}}],preDrawCallback:function(t){$(".btn-excel-inventory, .btn-print-inventory, .btn-search-inventory").removeClass("dt-button").addClass("btn btn-primary btn-flat btn-sm").css({"margin-bottom":"0.5em","margin-right":"0.5em"}),$(".btn-print-inventory").text("").html("<i class='glyphicon glyphicon-print'></i>").attr("title","Print"),$(".btn-excel-inventory").text("").html("<i class='fa fa-file-excel-o'></i>").attr("title","Export to Excel")}}),this},actions:function(){return $(".dthead-search-invnt-hq").on("click","button, a",function(t){t.preventDefault();var n=$(this).text().toLowerCase();"search"==n&&self.dtCurrentInvtHq.dtInstance.ajax.reload(null,!0),"reset"==n&&($(".dt-head-search input[type='text'], .dt-head-search select").val(""),self.dtCurrentInvtHq.dtInstance.ajax.reload(null,!0))}),this}},dtCurrentInventory={dtInstance:null,selectedBranch:null,pageDetails:function(){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Current</small>"),this},render:function(t,n,e){return this.dtInstance=$("#dtCurrentInventory").DataTable({initComplete:function(){autoDrpDownInvnt.getType("#search-invnt-type").getCondition("#search-invnt-bnrf"),autoDrpDown.getBrandName("#search-invnt-brand").getCategory("#search-invnt-category")},dom:"Bl<'dropdown-bulk col-md-3 col-xs-12'>rtip",ordering:!1,autoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],pageLength:25,language:{processing:!0,loadingRecords:'<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><span class="sr-only">Please wait - loading...</span>',infoEmpty:"No entries to show"},destroy:!0,responsive:!0,buttons:[{extend:"excel",className:"btn-excel-inventory hidden-xs",exportOptions:{columns:[1,2,3,4,5,6,7,8]},filename:"Current Inventory "+getTodayDate()},{extend:"print",exportOptions:{columns:[0,1,2,3,4,5,6,7,8]},className:"btn-print-inventory hidden-xs",customize:function(t){var n=$(t.document.body);n.find("h1").remove(),n.prepend("<h4>Machine Inventory Stocks</h4>")}},{text:"Add Machines",tag:"a",className:"btn-add-inventory",action:function(t,n,e,a){}},{text:"Open Search Filter",className:"btn-search-inventory",action:function(t,n,e,a){$("#dthead-search-invnt").slideToggle("fast",function(){$(this).is(":visible")?e[0].innerText="Close Search Filter":(e[0].innerText="Open Search Filter",dtCurrentInventory.dtInstance.ajax.reload(null,!0))})}}],ajax:{url:assets+"php/inventory/inventory.php",type:"POST",data:function(t){var e=$("#current-invnt-branchlist option:selected").val();t.status_type="IN",t.action="view-all",t.branch=1==n?e:n}},columns:[{data:null},{data:null},{data:"serialnumber"},{data:"brand_name"},{data:"model"},{data:"cat_name"},{data:"type_name"},{data:"location"},{data:"date_entered"},{data:null},{data:null,width:"30px"},{data:null,width:"30px"},{data:null,width:"30px"}],columnDefs:[{targets:0,render:function(t,n,e,a){return'<input class="chk-sn" type="checkbox" name="id[]" value="'+$("<div/>").text(t.id).html()+'">'}},{targets:1,render:function(t,n,e,a){return a.row+1}},{targets:9,render:function(t,n,e,a){return"BNC"==t.acronym_name?t.acronym_name_def:t.acronym_name}},{targets:10,render:function(t,n,e,a){return'<a href="#" title="EDIT MACHINE" data-toggle="modal" data-target="#modalFormCurrentInvnt" class="btn btn-success btn-flat btn-xs btn-edit-inventory" data-id-invnt="'+t.id+'">EDIT</a>'}},{targets:11,render:function(t,n,e,a){return'<a href="#" title="OUT MACHINE" data-toggle="modal" data-target="#modalFormOutMachine" class="btn btn-warning btn-flat btn-xs btn-out-inventory" data-id-invnt="'+t.id+'">OUT</a>'}},{targets:12,render:function(t){return'<a title="STATUS LOGS" class="btn btn-xs btn-default-logs btn-flat viewInvntStatusLogs" data-id-invnt="'+t.id+'"><i class="fa fa-clock-o"></i></a>'}}],preDrawCallback:function(t){$(".btn-search-inventory, .btn-excel-inventory, .btn-print-inventory, .btn-add-inventory").removeClass("dt-button").addClass("btn btn-primary btn-flat btn-sm").css({"margin-bottom":"0.5em","margin-right":"0.5em"}),$(".btn-print-inventory").text("").html("<i class='glyphicon glyphicon-print'></i>").attr("title","Print"),$(".btn-excel-inventory").text("").html("<i class='fa fa-file-excel-o'></i>").attr("title","Export to Excel")},fnDrawCallback:function(){$(".btn-add-inventory").attr("data-toggle","modal"),$(".btn-add-inventory").attr("data-target","#modalFormCurrentInvnt");var t=JSON.parse(Cookies.get("app_module_action"));null==t?$(".btn-add-inventory, .btn-edit-inventory, .viewInvntStatusLogs, .btn-out-inventory, .btn-in-inventory, .btn-bulk").remove():"r"==t.action_invnt&&$(".btn-add-inventory, .btn-edit-inventory, .viewInvntStatusLogs, .btn-out-inventory, .btn-in-inventory, .btn-bulk").remove()}}),$("#select_all").on("click",function(){var t=dtCurrentInventory.dtInstance.rows({search:"applied"}).nodes(),n=$('input[type="checkbox"]',t).prop("checked",this.checked);$(this).is(":checked")?$(n).parent("td").addClass("chkboxes-background"):$(n).parent("td").removeClass("chkboxes-background")}),$("div.dt-buttons").prepend('<div class="dropdown btn-bulk" style="display:inline; margin-right:0.5em; vertical-align:bottom"><button style="vertical-align:top;" class="btn btn-primary btn-flat btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Bulk Action <span class="caret"></span></button><ul class="dropdown-menu bulk-action"><li><a href="#" class="bulk-action-out">OUT MACHINE</a></li></ul></div>'),dtCurrentInventory.dtInstance.on("click",'input[type="checkbox"]',function(t){$(this).closest("td").toggleClass("chkboxes-background")}),this},selectBranch:function(t,n){return 1==t&&1==n&&($("div.current-invnt-branches").html('<label>Branch: <select id="current-invnt-branchlist" style="padding:2px 4px"></select></label> '),autoDrpDownInvnt.getBranch("#current-invnt-branchlist",null,[1],2),$("select#current-invnt-branchlist").change(function(){dtCurrentInventory.dtInstance.ajax.reload()})),this},modalShow:function(){return $("#displayFormInvntEntry").load(pages+"inventory/current/form.html",function(){self.dtCurrentInventory.addMultipleInput(),autoDrpDownInvnt.getType("#slctCurInvntType").getCondition("#slctCurInvntBnRf").getBranch("#slctCurInvntBranch",null,[1]).getModelByBrand("#slctCurInvntModel",!0),autoDrpDown.getAllCompany("#slctCurInvntCompany","100%").getBrandName("#slctCurInvntBrands").getCategory("#slctCurInvntCategory"),self.dtCurrentInventory.showModelByBrand().autoFillCatType(),$(this).find("#modalFormCurrentInvnt").on("hidden.bs.modal",function(){$(this).find("#frmCurrentInvnt").trigger("reset"),$(this).find("#frmCurrentInvnt input:hidden").val(""),$(this).find("#slctCurInvntModel").prop("disabled",!0).val(0).trigger("chosen:updated"),$(this).find("input, select").parents(".col-sm-6").removeClass("has-error has-success"),$(this).find("input, select ").next("em").hide(),$(".delete-sn",$(".container-multiple-sn")).trigger("click")})}),this},add:function(){var t=$("button[type='submit']"),n={action:"add",serialnum:$('input[name="txtCurInvntSerial"]').map(function(){if(""!=$(this).val())return $(this).val()}).get().join(","),brand:$("#slctCurInvntBrands option:selected").val(),model:$("#slctCurInvntModel").chosen().val(),type:$("#slctCurInvntType option:selected").val(),bnrf:$("#slctCurInvntBnRf option:selected").val(),location:$("#txtCurInvntLocation").val(),branch:$("#slctCurInvntBranch option:selected").val(),category:$("#slctCurInvntCategory option:selected").val()};return $.ajax({type:"POST",url:assets+"php/inventory/inventory.php",data:n,dataType:"json",beforeSend:function(){t.button("loading")},success:function(t,n,e){"success"==t.aaData?(self.dtCurrentInventory.dtInstance.ajax.reload(null,!1),promptMSG("success-add","Machine",null,null,!0,!0)):promptMSG("warning",t.aaData,null,null,!1,null)},error:function(t,n){alert(t+n)},complete:function(n,e){"success"==n.responseJSON.aaData&&(resetForm("#frmCurrentInvnt"),$("#slctCurInvntModel").val(0).trigger("chosen:updated")),t.button("reset")}}),this},update:function(t){var n=$("button[type='submit']"),e={action:"update",id_machine:t,serialnum:$(".txtCurInvntSerial").val(),brand:$("#slctCurInvntBrands option:selected").val(),model:$("#slctCurInvntModel").chosen().val(),type:$("#slctCurInvntType option:selected").val(),bnrf:$("#slctCurInvntBnRf option:selected").val(),location:$("#txtCurInvntLocation").val(),branch:$("#slctCurInvntBranch option:selected").val(),category:$("#slctCurInvntCategory option:selected").val()};return""!=t?$.ajax({type:"POST",url:assets+"php/inventory/inventory.php",data:e,dataType:"json",beforeSend:function(){n.button("loading")},success:function(t,n,e){self.dtCurrentInventory.dtInstance.ajax.reload(null,!1),promptMSG("success-update","Machine",null,null,!0,!0)},error:function(t,n){alert(t+n)},complete:function(){n.button("reset")}}):alert("ID is empty"),this},getData:function(t){if(""!=t){var n=$("button[type='submit']");$.ajax({type:"POST",url:assets+"php/inventory/inventory.php",data:{action:"view-id",id_machine:t},dataType:"json",beforeSend:function(){n.button("loading")},success:function(t,n,e){$.each(t.aaData,function(t,n){$("#hdnCurInvntId").val(n.id),$(".txtCurInvntSerial").val(n.serialnumber),$("#hdnOldCurInvntSerial").val(n.serialnumber),$("#slctCurInvntBrands").val(n.id_brand).trigger("change"),$("#slctCurInvntModel").val(n.model).trigger("chosen:updated"),$("#slctCurInvntCategory").val(n.id_category),$("#slctCurInvntType").val(n.id_type),$("#slctCurInvntBnRf").val(n.id_condition),$("#txtCurInvntLocation").val(n.location),$("#slctCurInvntBranch").val(n.id_branch),$("#txtCurInvntDateEntered").text(n.date_entered)})},error:function(t,n){alert(t+n)},complete:function(){n.button("reset"),$("#slctCurInvntModel").prop("disabled",!1).trigger("chosen:updated")}})}else alert("ID is empty");return this},modalShowOutMachine:function(){return $("#displayFormInvntInOutMachine").load(pages+"inventory/current/form-out.html",function(t){autoDrpDownInvnt.getStatus("#slctCurInvntStatus","OUT").getBranch("#slctCurInvntOutBranch",null,[1]),autoDrpDown.getAllCompany("#slctCurInvntCompany","100%").getBranchNameOne("#slctCurInvntLocation","100%",[1]),self.dtCurrentInventory.showLocationByComp(),$("#txtCurInvntDateOut").inputmask()}),this},outMachine:function(t){var n=$("button[type='submit']"),e={action:"update_out",id_machine:$("#hdnInvntOutId").val(),status:$("#slctCurInvntStatus option:selected").val(),company:$("#slctCurInvntCompany").chosen().val(),date:$("#txtCurInvntDateOut").val(),remarks:$("#txtCurInvntRemarks").val(),client_location:$("#slctCurInvntLocation").chosen().val(),id_user:Cookies.get("user_id"),branch:$("#slctCurInvntOutBranch option:selected").val()};$.ajax({type:"POST",url:assets+"php/inventory/inventory.php",data:e,dataType:"json",beforeSend:function(){n.button("loading")},success:function(t,n,e){self.dtCurrentInventory.dtInstance.ajax.reload(function(){promptMSG("remove","Machine",null,null,!1),$(".mif-modalPromptMSG").on("click","button",function(){$("#modalFormOutMachine").modal("hide")})},!0)},error:function(t,n){alert(t+n)},complete:function(){n.button("reset")}})},showLocationByComp:function(){$("#slctCurInvntCompany").change(function(){var t=$(this).chosen().val()||null;null!=t?$.ajax({type:"GET",dataType:"json",url:assets+"php/misc/inventory_misc.php",data:{action:"client_location_by_company",id_company:t},beforeSend:function(){$("#slctCurInvntLocation").val(0).trigger("chosen:updated"),$("#slctCurInvntLocation option").hide().trigger("chosen:updated")},success:function(t){if(t.aaData[0]){var n=convertArrStrToInt(t.aaData[0].id_branches),e=0;for(e=0;e<n.length;e++)$("#slctCurInvntLocation").prop("disabled",!1).trigger("chosen:updated"),$("#slctCurInvntLocation option[value='"+n[e]+"']").show().trigger("chosen:updated")}},error:function(t,n){alert(t+n)}}):$("#slctCurInvntLocation").prop("disabled",!0).val(0).trigger("chosen:updated")})},showModelByBrand:function(){return $("#slctCurInvntBrands").change(function(){var t=$(this).val()||null;null!=t?$.ajax({type:"GET",dataType:"json",url:assets+"php/misc/inventory_misc.php",data:{action:"model_by_brand",id_brand:t},beforeSend:function(){$("#slctCurInvntModel").val(0).trigger("chosen:updated"),$("#slctCurInvntModel option").hide().trigger("chosen:updated"),$("#slctCurInvntCategory,#slctCurInvntType").val("")},success:function(t){if(null!=t.aaData[0].id_model){var n=convertArrStrToInt(t.aaData[0].id_model),e=0;for(e=0;e<n.length;e++)$("#slctCurInvntModel").prop("disabled",!1).trigger("chosen:updated"),$("#slctCurInvntModel option[value='"+n[e]+"']").show().trigger("chosen:updated")}},error:function(t,n){alert(t+n)}}):$("#slctCurInvntModel").prop("disabled",!0).val(0).trigger("chosen:updated")}),this},autoFillCatType:function(){return $("#slctCurInvntModel").change(function(){var t=convertArrStrToInt($(this).find("option:selected").data("cat-type"));null!=t?($("#slctCurInvntCategory").val(t[0]),$("#slctCurInvntType").val(t[1])):$("#slctCurInvntCategory,#slctCurInvntType").val("")}),this},actions:function(t,n){return $("#currentInventoryList").on("click","a.btn-edit-inventory, a.btn-add-inventory, a.btn-out-inventory, button.dt-invnt-refresh, a.viewInvntStatusLogs, a.bulk-action-out",function(n){n.preventDefault();var e=$(this);if(e.closest("tr").hasClass("selected")||(self.dtCurrentInventory.dtInstance.$("tr.selected").removeClass("selected"),e.closest("tr").addClass("selected")),1!=t&&$("#slctCurInvntBranch").prop("disabled",!0).val(t),$(e[0]).hasClass("btn-add-inventory"))$("#modalFormCurrentInvnt .modal-title").text("Add Machine"),$("#modalFormCurrentInvnt #txtCurInvntDateEntered").text(getTodayDate()),$("#add-multiple-sn").show();else if($(e[0]).hasClass("btn-edit-inventory")){var a=$(e[0]).data("id-invnt")||"";self.dtCurrentInventory.getData(a),$("#modalFormCurrentInvnt .modal-title").text("Edit Machine"),$("#add-multiple-sn").hide()}else if($(e[0]).hasClass("btn-out-inventory")){a=$(e[0]).data("id-invnt")||"";$("#modalFormOutMachine .modal-title").text("Out Machine"),$("#hdnInvntOutId").val(a)}else if($(e[0]).hasClass("dt-invnt-refresh")){var r=Cookies.get("branch"),s=JSON.parse(Cookies.get("app_module"));self.dtCurrentInventory.render(s.invnt,r)}else if($(e[0]).hasClass("viewInvntStatusLogs")){a=e.data("id-invnt");dtInvntLogs.showModal(a)}else{if(!$(e[0]).hasClass("bulk-action-out"))return!1;var o=self.dtCurrentInventory.getMultipleIds()||"";""==o?promptMSG("custom","Please select IDs # in the checkboxes.","<i class='fa fa-warning'></i>",null,!1,!1):($("#modalFormOutMachine").modal("show"),$("#modalFormOutMachine .modal-title").text("Bulk Out Machine"),$("#hdnInvntOutId").val(o))}}),this},getMultipleIds:function(){var t=dtCurrentInventory.dtInstance.rows({search:"applied"}).nodes();return $('input[type="checkbox"]:checked',t).map(function(){return this.value}).get().join(",")},addMultipleInput:function(){var t=$(".container-multiple-sn"),n=2;return $("#add-multiple-sn a").click(function(e){e.preventDefault(),n<=10?($(t).append('<div class="input-group"><input type="text" class="form-control txtCurInvntSerial" name="txtCurInvntSerial" placeholder="S/N '+n+'"/><span class="input-group-btn"><button class="btn btn-danger btn-xs delete-sn" type="button">x</button></span></div>').focus(),n++):alert("Maximum of ten(10) Serials can input.")}),$(t).on("click",".delete-sn",function(t){t.preventDefault(),$(this).closest("div.input-group").remove(),n--}),$.extend($.validator.prototype,{checkForm:function(){this.prepareForm();for(var t=0,n=this.currentElements=this.elements();n[t];t++)if(void 0!=this.findByName(n[t].name).length&&this.findByName(n[t].name).length>1)for(var e=0;e<this.findByName(n[t].name).length;e++)this.check(this.findByName(n[t].name)[e]);else this.check(n[t]);return this.valid()}}),this}},dtCurrentInvtIssuances={dtInstance:null,selectedBranch:null,pageDetails:function(){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Current</small>"),this},render:function(){return this.dtInstance=$("#dtCurrentInvtIssuances").DataTable({dom:"Blrtip",ordering:!1,autoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],pageLength:25,serverSide:!0,processing:!0,language:{processing:'<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i><span class="sr-only">Please wait - loading...</span>',infoEmpty:"No entries to show"},destroy:!0,responsive:!0,buttons:[{extend:"excel",className:"btn-excel-inventory hidden-xs",exportOptions:{columns:[1,2,3,4,5,6,7]},filename:"SAP - Issuances "+getTodayDate()},{extend:"print",exportOptions:{columns:[0,1,2,3,4,5,6,7]},className:"btn-print-inventory hidden-xs",customize:function(t){var n=$(t.document.body);n.find("h1").remove(),n.prepend("<h4>SAP - Issuances</h4>")}},{text:"Open Search Filter",className:"btn-search-inventory",action:function(t,n,e,a){$(".dthead-search-invnt-issuances").slideToggle("fast",function(){$(this).is(":visible")?e[0].innerText="Close Search Filter":(e[0].innerText="Open Search Filter",$(".dt-head-search input[type='text'], .dt-head-search select").val(""),dtCurrentInvtIssuances.dtInstance.ajax.reload(null,!0))})}}],ajax:{url:assets+"php/inventory/sapIssuances.php",type:"POST",dataSrc:"records",data:function(t){t.company_name=$(".search-hq-company").filter(":visible").val()||"",t.ref=$(".search-hq-ref").filter(":visible").val()||"",t.date=$(".search-hq-date").filter(":visible").val()||"",t.item=$(".search-hq-item").filter(":visible").val()||"",t.descrip=$(".search-hq-descrip").filter(":visible").val()||"",t.serial=$(".search-hq-issue-serial").filter(":visible").val()||""}},columns:[{data:null,render:function(t,n,e,a){return a.row+1}},{data:"company_name"},{data:"ref_no"},{data:"doc_date"},{data:"item_code"},{data:"description"},{data:"serial"},{data:null,width:"120px",render:function(t,n,e,a){return""}}],preDrawCallback:function(t){$(".btn-excel-inventory, .btn-print-inventory, .btn-search-inventory").removeClass("dt-button").addClass("btn btn-primary btn-flat btn-sm").css({"margin-bottom":"0.5em","margin-right":"0.5em"}),$(".btn-print-inventory").text("").html("<i class='glyphicon glyphicon-print'></i>").attr("title","Print"),$(".btn-excel-inventory").text("").html("<i class='fa fa-file-excel-o'></i>").attr("title","Export to Excel")}}),this},actions:function(){return $(".dthead-search-invnt-issuances").on("click","button, a",function(t){t.preventDefault();var n=$(this).text().toLowerCase();"search"==n&&self.dtCurrentInvtIssuances.dtInstance.ajax.reload(null,!0),"reset"==n&&($(".dt-head-search input[type='text'], .dt-head-search select").val(""),self.dtCurrentInvtIssuances.dtInstance.ajax.reload(null,!0))}),this}},machineInventoryCharts={brandDataOpt:[],dtInstance:{},dtInstanceLoc:{},pageDetails:function(){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Home</small>"),this},brands:function(){var t={bn:[],rf:[]};return $.getJSON(assets+"php/inventory/inventory-chart.php",{type_chart:"brands"},function(n){$.each(n.aaData,function(n,e){t.bn.push({y:parseInt(e.bn),label:e.brand_name,id_brand:e.id_brand}),t.rf.push({y:parseInt(e.rf),label:e.brand_name,id_brand:e.id_brand})})}).complete(function(){var n={animationEnabled:!0,title:{text:"Summary Inventory Brand"},axisY:{gridThickness:1},axisX:{labelFontColor:"#00a65a"},data:[{click:function(t){var n=t.dataPoint.id_brand||0;self.machineInventoryCharts.showModels(n,t.dataPoint.label)},type:"stackedColumn",toolTipContent:"{label}<br/><span style='\"'color: {color};'\"'><strong>{name}</strong></span>: {y} machines",name:"BN (Brand New)",showInLegend:"true",dataPoints:t.bn,fillOpacity:.9},{click:function(t){var n=t.dataPoint.id_brand||0;self.machineInventoryCharts.showModels(n,t.dataPoint.label)},type:"stackedColumn",toolTipContent:"{label}<br/><span style='\"'color: {color};'\"'><strong>{name}</strong></span>: {y} machines",name:"RF (Refurbish)",showInLegend:"true",indexLabel:"#total",indexLabelPlacement:"outside",indexLabelFontColor:"#dd4b39",dataPoints:t.rf,fillOpacity:.9}]};$("#chartInventoryBrands").ready(function(){$("#chartInventoryBrands").CanvasJSChart(n)})}),this},showModels:function(t,n){$("#displayModelChart").load(pages+"inventory/charts/model.html",function(){$("#modalInvntChartModel").modal("show"),autoDrpDown.getBrandName("#slctInvntChartBrand"),$("#modalInvntChartModel").find(".modal-title").html(n+" <small style='color:#c0dac0'>stocks</small>"),self.machineInventoryCharts.renderModels(t),$("#slctInvntChartBrand").change(function(){id_brand=$(this).val()||0,brand_text=0!=id_brand?$(this).find("option:selected").text():"w/o brand name",$("#modalInvntChartModel").find(".modal-title").html(brand_text+" <small style='color:#c0dac0'>stocks</small>"),self.machineInventoryCharts.renderModels(id_brand)})})},renderModels:function(t){return this.dtInstance=$("#dtInvntChartModel").DataTable({dom:"flrtip",autoWidth:!1,responsive:!0,pageLength:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],oLanguage:{bProcessing:!0,sLoadingRecords:'<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><span class="sr-only">Please wait - loading...</span>',sInfoEmpty:"No entries to show"},bDestroy:!0,bStateSave:!0,ordering:!1,ajax:{url:assets+"php/inventory/inventory-chart.php",type:"GET",data:{type_chart:"models",idBrand:t}},columns:[{data:null,render:function(t,n,e,a){return a.row+1}},{data:null,render:function(t,n,e,a){return"<span class='text-center'>"+t.model_name+"</span>"}},{data:null,render:function(t,n,e,a){return"<span class='text-center'>"+(t.total_machine||0)+"</span>"}}],columnDefs:[{responsivePriority:1,target:0}],deferRender:!0,footerCallback:function(t,n,e,a,r){var s=this.api(),o=s.column(2).data(),l=0;$.each(o,function(t,n){null!=n.total_machine&&(l+=parseInt(n.total_machine))}),$(s.column(2).footer()).html("Overall Total: "+formatNumber(l))}}),this}},dtInvntLogs={dtInstanceLogs:null,render:function(t){var n=$("#btnSearchMifLogs");return this.dtInstanceLogs=$("#dtInvntLogs").DataTable({dom:"<'search-toolbar'>lrtip",processing:!0,serverSide:!0,ordering:!1,destroy:!0,responsive:!0,ajax:{url:assets+"php/inventory/inventoryLogs.php",type:"POST",dataSrc:"records",beforeSend:function(){n.button("loading")},data:function(n){n.id_machine=t,n.search={value:$("#txtSearchLogs").val()||null}}},columns:[{data:null},{data:"fullname"},{data:"date_in_out"},{data:"company_name"},{data:null},{data:null}],columnDefs:[{targets:0,render:function(t,n,e,a){return a.row+1}},{targets:4,render:function(t,n,e,a){var r=t.status_name,s=t.status_type;return""!=r?"<span>"+r+" <strong>("+s+")</strong></span>":""}},{targets:5,render:function(t,n,e,a){var r=t.remarks;return""!=r?'<a href="#" style="color: #c34838" data-toggle="popover" title="Remarks" data-placement="right" data-content="'+r+'" data-trigger="focus"><i class="fa fa-comment"></i></a>':""}}],drawCallback:function(){$('[data-toggle="popover"]').popover().on("click",function(t){t.preventDefault()})}}),$("div.search-toolbar").html("<div class='pull-right'><input type='search' id='txtSearchLogs' placeholder='Search' style='margin-right:10px'/><a href='#' class='btn btn-flat btn-xs btn-primary' id='btnSearchMifLogs'><i class='fa fa-search' title='Search'></i></a></div>"),$("#btnSearchMifLogs").click(function(t){t.preventDefault(),self.dtInvntLogs.dtInstanceLogs.ajax.reload()}),this},showModal:function(t){return $("#displayViewInvntLogs").load(pages+"inventory/current/logs.html",function(){$("#modalInvntLogs").modal("show"),self.dtInvntLogs.render(t)}),this}},reportInvntBnRfTable={pageDetails:function(t){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Reports</small>"),self.reportInvntBnRfTable.drop_down_branch(t),this},drop_down_branch:function(t){1==t?(autoDrpDownInvnt.getBranch("#reports-invnt-stocks",null,[1],2),$("#reports-invnt-stocks").change(function(){var t=$(this);self.reportInvntBnRfTable.table_brand_stock(t.val())})):$("#dropdwn-report-stocks").remove()},table_brand_stock:function(t){var n="",e=$("#reports-invnt-stocks option:selected").val(),a=1==t?e:t;return $.ajax({type:"GET",url:assets+"php/inventory/reports/brand-stocks.php",cache:!1,data:{id_branch:a},dataType:"json",success:function(t,e,a){if(0!=t.length){var r=0;$.each(t,function(t,e){n+='<div class="col-lg-3 col-md-6 '+(r%4==0?"clearFix":"")+'">',n+='<div class="panel panel-orange" id="panelReportStocks'+t+'">',n+='<div class="panel-heading">',n+='<div class="row">',n+='<div class="col-xs-3">',n+='<i class="fa fa-print fa-2x"></i>',n+="</div>",n+='<div class="col-xs-9 text-right">',n+='<div class="huge"></div>',n+='<div class="text-left"><h4>'+t,n+="</h4></div>",n+="</div>",n+="</div>",n+="</div>",n+='<div id="reportStocks'+t+'" class="table-responsive">',n+='<table class="table table-bordered table-custom-bordered thead-inverse" id="tableStocks'+t+'">',n+="<thead>",n+="<tr>",n+="<th>Model</th>",n+="<th>BN</th>",n+="<th>RF</th>",n+="</tr>",n+="</thead>",n+="<tbody>",$.each(e,function(t,e){n+='<tr><th colspan="3">'+t+"</th></tr>",$.each(e,function(t,e){n+="<tr>",n+="<td>"+e.model_name+"</td>",n+="<td>"+e.bn+"</td>",n+="<td>"+e.rf+"</td>",n+="</tr>"})}),n+="</tbody>",n+="</table>",n+="</div>",n+="</div>",n+="</div>",r++})}else n="<h5 class='text-center'>No data available in the table</h5>"},complete:function(t){$("#report-brand-stock").html(n)}}),this}},reportInvntInOutTable={pageDetails:function(t){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Reports</small>"),self.reportInvntInOutTable.drop_down_branch(t),this},drop_down_branch:function(t){return 1==t?(autoDrpDownInvnt.getBranch("#slctreports-in-out",null,[1],2),$("#slctreports-in-out").change(function(){var t=$(this);self.reportInvntInOutTable.table_in_out_stock(t.val())})):$("#dropdwn-in-out-stocks").remove(),this},table_in_out_stock:function(t){var n="",e=$("#slctreports-in-out option:selected").val(),a=1==t?e:t;return $.ajax({type:"GET",url:assets+"php/inventory/reports/in-out-stocks.php",cache:!1,data:{id_branch:a},dataType:"json",success:function(t,e,a){if(0!=t.length){var r=0;$.each(t,function(t,e){n+='<div class="col-lg-3 col-md-3 col-md-6 '+(r%4==0?"clearFix":"")+'">',n+='<div class="panel panel-orange" id="panelReportInOutStocks'+t+'">',n+='<div class="panel-heading">',n+='<div class="row">',n+='<div class="col-xs-3">',n+='<i class="fa fa-print fa-2x"></i>',n+="</div>",n+='<div class="col-xs-9 text-right">',n+='<div class="huge"></div>',n+='<div class="text-left"><h4>'+t,n+="</h4></div>",n+="</div>",n+="</div>",n+="</div>",n+='<div id="reportInOutStocks'+t+'" class="table-responsive">',n+='<table class="table table-bordered table-custom-bordered thead-inverse" id="tableInOutStocks'+t+'">',n+="<thead>",n+="<tr>",n+="<th>Model</th>",n+="<th>Total IN</th>",n+="<th>Total OUT</th>",n+="<th>Over all Total</th>",n+="</tr>",n+="</thead>",n+="<tbody>",$.each(e,function(t,e){n+="<tr>",n+="<td>"+e.model_name+"</td>",n+="<td>"+e.total_in+"</td>",n+="<td>"+e.total_out+"</td>",n+="<td>"+e.over_all_total+"</td>",n+="</tr>"}),n+="</tbody>",n+="</table>",n+="</div>",n+="</div>",n+="</div>",r++})}else n="<h5 class='text-center'>No data available in the table</h5>"},complete:function(t){$("#report-in-out-stock").html(n)}}),this}},reportInvntSapIssuances={pageDetails:function(t){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Reports</small>"),this},table_sap_issuances:function(t){var n="";return $.ajax({type:"GET",url:assets+"php/inventory/reports/sap-issuances.php",cache:!1,dataType:"json",success:function(t,e,a){if(0!=t.length){var r=0;$.each(t,function(t,e){n+='<div class="col-lg-3 col-md-3 col-md-6 '+(r%4==0?"clearFix":"")+'">',n+='<div class="panel panel-orange" id="panelReportInOutStocks'+t+'">',n+='<div class="panel-heading">',n+='<div class="row">',n+='<div class="col-xs-3">',n+='<i class="fa fa-print fa-2x"></i>',n+="</div>",n+='<div class="col-xs-9 text-right">',n+='<div class="huge"></div>',n+='<div class="text-left"><h4>'+t,n+="</h4></div>",n+="</div>",n+="</div>",n+="</div>",n+='<div id="reportInOutStocks'+t+'" class="table-responsive">',n+='<table class="table table-bordered table-custom-bordered thead-inverse" id="tableInOutStocks'+t+'">',n+="<thead>",n+="<tr>",n+="<th>Model</th>",n+="<th>Total</th>",n+="</tr>",n+="</thead>",n+="<tbody>",$.each(e,function(t,e){n+="<tr>",n+="<td>"+e.model+"</td>",n+="<td>"+e.total_model+"</td>",n+="</tr>"}),n+="</tbody>",n+="</table>",n+="</div>",n+="</div>",n+="</div>",r++})}else n="<h5 class='text-center'>No data available in the table</h5>"},complete:function(t){$("#report-sap-issuances").html(n)}}),this}},reportInvntSapStocks={pageDetails:function(t){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Reports</small>"),this},table_sap_stock:function(t){var n="";return $.ajax({type:"GET",url:assets+"php/inventory/reports/sap-stocks-ho.php",cache:!1,dataType:"json",success:function(t,e,a){if(0!=t.length){var r=0;$.each(t,function(t,e){n+='<div class="col-lg-3 col-md-6 '+(r%4==0?"clearFix":"")+'">',n+='<div class="panel panel-orange" id="panelReportStocks'+t+'">',n+='<div class="panel-heading">',n+='<div class="row">',n+='<div class="col-xs-3">',n+='<i class="fa fa-print fa-2x"></i>',n+="</div>",n+='<div class="col-xs-9 text-right">',n+='<div class="huge"></div>',n+='<div class="text-left"><h4>'+t,n+="</h4></div>",n+="</div>",n+="</div>",n+="</div>",n+='<div id="reportStocks'+t+'" class="table-responsive">',n+='<table class="table table-bordered table-custom-bordered thead-inverse" id="tableStocks'+t+'">',n+="<thead>",n+="<tr>",n+="<th>Model</th>",n+="<th>QTY</th>",n+="</tr>",n+="</thead>",n+="<tbody>",$.each(e,function(t,e){n+='<tr><th colspan="2">'+(t||"Others")+"</th></tr>",$.each(e,function(t,e){n+="<tr>",n+="<td>"+(e.model_name||"- No Manufacturer")+"</td>",n+="<td>"+e.qty+"</td>",n+="</tr>"})}),n+="</tbody>",n+="</table>",n+="</div>",n+="</div>",n+="</div>",r++})}else n="<h5 class='text-center'>No data available in the table</h5>"},complete:function(t){$("#report-sap-stock").html(n)}}),this}},dtInventoryBranch=(reportInvntSapStocks={pageDetails:function(t){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Reports</small>"),this},table_sap_stock:function(t){var n="";return $.ajax({type:"GET",url:assets+"php/inventory/reports/sap-stocks-ho.php",cache:!1,dataType:"json",success:function(t,e,a){if(0!=t.length){var r=0;$.each(t,function(t,e){n+='<div class="col-lg-3 col-md-6 '+(r%4==0?"clearFix":"")+'">',n+='<div class="panel panel-orange" id="panelReportStocks'+t+'">',n+='<div class="panel-heading">',n+='<div class="row">',n+='<div class="col-xs-3">',n+='<i class="fa fa-print fa-2x"></i>',n+="</div>",n+='<div class="col-xs-9 text-right">',n+='<div class="huge"></div>',n+='<div class="text-left"><h4>'+t,n+="</h4></div>",n+="</div>",n+="</div>",n+="</div>",n+='<div id="reportStocks'+t+'" class="table-responsive">',n+='<table class="table table-bordered table-custom-bordered thead-inverse" id="tableStocks'+t+'">',n+="<thead>",n+="<tr>",n+="<th>Model</th>",n+="<th>Total</th>",n+="</tr>",n+="</thead>",n+="<tbody>",$.each(e,function(t,e){n+="<tr>",n+="<td>"+e.model+"</td>",n+="<td>"+e.total_model+"</td>",n+="</tr>"}),n+="</tbody>",n+="</table>",n+="</div>",n+="</div>",n+="</div>",r++})}else n="<h5 class='text-center'>No data available in the table</h5>"},complete:function(t){$("#report-sap-stock").html(n)}}),this}},{dtInstance:{},render:function(){return this.dtInstance=$("#dtInventoryBranch").DataTable({dom:"flrtip",autoWidth:!1,responsive:!0,pageLength:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],oLanguage:{bProcessing:!0,sLoadingRecords:'<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><span class="sr-only">Please wait - loading...</span>',sInfoEmpty:"No entries to show"},bDestroy:!0,bStateSave:!0,ordering:!1,ajax:{url:assets+"php/inventory/settings/branch.php",type:"GET",data:{action:"view-all"}},columns:[{data:null,render:function(t,n,e,a){return a.row+1}},{data:null,render:function(t,n,e,a){return"<span class='text-center'>"+t.branch_name+"</span>"}},{data:null,render:function(t,n,e,a){return 1!=t.id?"<button class='btn btn-xs btn-success btn-flat btnUpdateInvntBranch' data-invnt-branch='"+t.id+"'>Update</button>":""}}],columnDefs:[{responsivePriority:1,target:0}],deferRender:!0}),this},modalShow:function(t){$("#displayFormInvntEntry").load(pages+"inventory/settings/form-branch.html",function(n,e,a){if($(this).find("#modalFormInvntBranch").modal("show"),null!=t){$(this).find(".modal-title").text("Update Branch");var r=$("button[type='submit']");$.ajax({type:"GET",url:assets+"php/inventory/settings/branch.php",data:{action:"view-id",id_branch:t},dataType:"json",beforeSend:function(){r.button("loading")},success:function(t){$.each(t.aaData,function(t,n){$("#hdnIdInvntBranch").val(n.id),$("#hdnOldInvntBranchName, #txtInvntSettingBranch").val(n.branch_name)})},error:function(t,n,e){promptMSG("warning","ID Machine not exist.")},complete:function(){r.button("reset")}})}else $(this).find(".modal-title").text("Add Branch")})},update:function(){var t=$("button[type='submit']"),n={action:"update",id_branch:$("#hdnIdInvntBranch").val(),branchname:$("#txtInvntSettingBranch").val()};$.ajax({type:"POST",url:assets+"php/inventory/settings/branch.php",data:n,dataType:"json",beforeSend:function(){t.button("loading")},success:function(t){self.dtInventoryBranch.dtInstance.ajax.reload(null,!1),autoDrpDownInvnt.cacheOptBranch.splice(0,1)},error:function(t,n,e){alert(n+e)},complete:function(){t.button("reset")}})},add:function(){var t=$("button[type='submit']"),n=($("#hdnIdInvntBranch").val(),{action:"add",branchname:$("#txtInvntSettingBranch").val()});$.ajax({type:"POST",url:assets+"php/inventory/settings/branch.php",data:n,dataType:"json",beforeSend:function(){t.button("loading")},success:function(t){self.dtInventoryBranch.dtInstance.ajax.reload(null,!1).page("last"),autoDrpDownInvnt.cacheOptBranch.splice(0,1)},error:function(t,n,e){alert(n+e)},complete:function(){resetForm("#frmSettingInvntBranch"),t.button("reset")}})},actions:function(){return $("table#dtInventoryBranch").on("click","button",function(){var t=$(this);if(t.closest("tr").hasClass("selected")||(self.dtInventoryBranch.dtInstance.$("tr.selected").removeClass("selected"),t.closest("tr").addClass("selected")),t.hasClass("btnUpdateInvntBranch")){var n=$(this).data("invnt-branch");self.dtInventoryBranch.modalShow(n)}}),$("#addInventoryBranch").click(function(t){self.dtInventoryBranch.modalShow()}),this}}),dtModels={dtInstance:{},pageDetails:function(){return $(".content-header h1").text("Machine Inventory"),$(".content-header h1").append("<small>Settings</small>"),this},render:function(t){var n=$("#btnSearchModel");return this.dtInstance=$("#dtModel").DataTable({dom:"<'search-toolbar'>lrtip",processing:!0,serverSide:!0,ordering:!1,destroy:!0,responsive:!0,autoWidth:!1,ajax:{url:assets+"php/inventory/settings/models.php",type:"POST",dataSrc:"records",beforeSend:function(){n.button("loading")},data:function(t){t.action="view-all",t.search={value:$("#txtSearchModel").val()||null}}},columns:[{data:null},{data:"brand_name"},{data:"model_name"},{data:"cat_name"},{data:"type_name"},{data:null}],columnDefs:[{targets:0,render:function(t,n,e,a){return a.row+1}},{targets:5,render:function(t,n,e,a){return"<button class='btn btn-xs btn-success btn-flat btnUpdateModel' data-model='"+t.id+"'>Update</button>"}}],drawCallback:function(){$('[data-toggle="popover"]').popover().on("click",function(t){t.preventDefault()})}}),$("div.search-toolbar").html("<div class='pull-right'><input type='search' id='txtSearchModel' placeholder='Search' style='margin-right:10px'/><a href='#' class='btn btn-flat btn-xs btn-primary' id='btnSearchModel'><i class='fa fa-search' title='Search'></i></a></div>"),$("#btnSearchModel").click(function(t){t.preventDefault(),self.dtModels.dtInstance.ajax.reload()}),this},modalShow:function(t){$("#displayFormInvntEntry").load(pages+"inventory/settings/form-model.html",function(n,e,a){if($(this).find("#modalFormModel").modal("show"),autoDrpDownInvnt.getType("#slctSettingInvntType"),autoDrpDown.getCategory("#slctSettingInvntCategory").getBrandName("#slctSettingInvntBrand"),null!=t){$(this).find(".modal-title").text("Update Model");var r=$("button[type='submit']");$.ajax({type:"GET",url:assets+"php/inventory/settings/models.php",data:{action:"view-id",id_model:t},dataType:"json",beforeSend:function(){r.button("loading")},success:function(t){$.each(t.aaData,function(t,n){$("#hdnIdModel").val(n.id),$("#slctSettingInvntBrand").val(n.id_brand),$("#hdnOldModel, #txtSettingInvntModel").val(n.model_name),$("#slctSettingInvntCategory").val(n.id_category),$("#slctSettingInvntType").val(n.id_type)})},error:function(t,n,e){promptMSG("warning","ID Machine not exist.")},complete:function(){r.button("reset")}})}else $(this).find(".modal-title").text("Add Model")})},update:function(){var t=$("button[type='submit']"),n={action:"update",id_model:$("#hdnIdModel").val(),id_brand:$("#slctSettingInvntBrand option:selected").val(),model_name:$("#txtSettingInvntModel").val(),id_category:$("#slctSettingInvntCategory option:selected").val(),id_type:$("#slctSettingInvntType option:selected").val()};$.ajax({type:"POST",url:assets+"php/inventory/settings/models.php",data:n,dataType:"json",beforeSend:function(){t.button("loading")},success:function(t){self.dtModels.dtInstance.ajax.reload(null,!1),autoDrpDownInvnt.cacheOptModel.splice(0,1)},error:function(t,n,e){alert(n+e)},complete:function(){t.button("reset")}})},add:function(){var t=$("button[type='submit']"),n={action:"add",id_model:$("#hdnIdModel").val(),id_brand:$("#slctSettingInvntBrand option:selected").val(),model_name:$("#txtSettingInvntModel").val(),id_category:$("#slctSettingInvntCategory option:selected").val(),id_type:$("#slctSettingInvntType option:selected").val()};$.ajax({type:"POST",url:assets+"php/inventory/settings/models.php",data:n,dataType:"json",beforeSend:function(){t.button("loading")},success:function(t){self.dtModels.dtInstance.ajax.reload(null,!1).page("last"),autoDrpDownInvnt.cacheOptModel.splice(0,1)},error:function(t,n,e){alert(n+e)},complete:function(){resetForm("#frmSettingModel"),t.button("reset")}})},actions:function(){return $("table#dtModel").on("click","button",function(){var t=$(this);if(t.closest("tr").hasClass("selected")||(self.dtModels.dtInstance.$("tr.selected").removeClass("selected"),t.closest("tr").addClass("selected")),t.hasClass("btnUpdateModel")){var n=$(this).data("model");self.dtModels.modalShow(n)}}),$("#addModels").click(function(t){self.dtModels.modalShow()}),this}},dtStatusInventory={dtInstance:{},render:function(){return this.dtInstance=$("#dtInventoryStatus").DataTable({dom:"flrtip",autoWidth:!1,responsive:!0,pageLength:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],oLanguage:{bProcessing:!0,sLoadingRecords:'<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><span class="sr-only">Please wait - loading...</span>',sInfoEmpty:"No entries to show"},bDestroy:!0,bStateSave:!0,ordering:!1,ajax:{url:assets+"php/inventory/settings/status.php",type:"GET",data:{action:"view-all"}},columns:[{data:null,render:function(t,n,e,a){return a.row+1}},{data:null,render:function(t,n,e,a){return"<span class='text-center'>"+t.status_name+"</span>"}},{data:null,render:function(t,n,e,a){return"<span class='text-center'>"+t.status_type+"</span>"}},{data:null,render:function(t,n,e,a){return"<button class='btn btn-xs btn-success btn-flat btnUpdateInvntStatus' data-invnt-status='"+t.id+"'>Update</button>"}}],columnDefs:[{responsivePriority:1,target:0}],deferRender:!0}),this},modalShow:function(t){$("#displayFormInvntEntry").load(pages+"inventory/settings/form-status.html",function(n,e,a){if($(this).find("#modalFormInvntStatus").modal("show"),null!=t){$(this).find(".modal-title").text("Update Status");var r=$("button[type='submit']");$.ajax({type:"GET",url:assets+"php/inventory/settings/status.php",data:{action:"view-id",id_status:t},dataType:"json",beforeSend:function(){r.button("loading")},success:function(t){$.each(t.aaData,function(t,n){$("#hdnIdInvntStatus").val(n.id),$("#hdnOldInvntStatus, #txtInvntSettingStatus").val(n.status_name),$("input[name='optradioInvntStatus'][value="+n.status_type+"]").prop("checked",!0)})},error:function(t,n,e){promptMSG("warning","ID Machine not exist.")},complete:function(){r.button("reset")}})}else $(this).find(".modal-title").text("Add Status")})},update:function(){var t=$("button[type='submit']"),n={action:"update",id_status:$("#hdnIdInvntStatus").val(),status_name:$("#txtInvntSettingStatus").val(),status_type:$("input[name='optradioInvntStatus']:checked").val()};$.ajax({type:"POST",url:assets+"php/inventory/settings/status.php",data:n,dataType:"json",beforeSend:function(){t.button("loading")},success:function(t){self.dtStatusInventory.dtInstance.ajax.reload(null,!1),null!=autoDrpDownInvnt.cacheOptStatus.IN&&(autoDrpDownInvnt.cacheOptStatus.IN=null),null!=autoDrpDownInvnt.cacheOptStatus.OUT&&(autoDrpDownInvnt.cacheOptStatus.OUT=null)},error:function(t,n,e){alert(n+e)},complete:function(){t.button("reset")}})},add:function(){var t=$("button[type='submit']"),n={action:"add",status_name:$("#txtInvntSettingStatus").val(),status_type:$("input[name='optradioInvntStatus']:checked").val()};$.ajax({type:"POST",url:assets+"php/inventory/settings/status.php",data:n,dataType:"json",beforeSend:function(){t.button("loading")},success:function(t){self.dtStatusInventory.dtInstance.ajax.reload(null,!1).page("last"),null!=autoDrpDownInvnt.cacheOptStatus.IN&&(autoDrpDownInvnt.cacheOptStatus.IN=null),null!=autoDrpDownInvnt.cacheOptStatus.OUT&&(autoDrpDownInvnt.cacheOptStatus.OUT=null)},error:function(t,n,e){alert(n+e)},complete:function(){resetForm("#frmSettingInvntStatus"),t.button("reset")}})},actions:function(){return $("table#dtInventoryStatus").on("click","button",function(){var t=$(this);if(t.closest("tr").hasClass("selected")||(self.dtStatusInventory.dtInstance.$("tr.selected").removeClass("selected"),t.closest("tr").addClass("selected")),t.hasClass("btnUpdateInvntStatus")){var n=$(this).data("invnt-status");self.dtStatusInventory.modalShow(n)}}),$("#addInventoryStatus").click(function(t){self.dtStatusInventory.modalShow()}),this}};