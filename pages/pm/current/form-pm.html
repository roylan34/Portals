<!-- Modal -->
<div class="modal fade" id="modalFormCurrentPM" class="modalFormCurrentPM" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="modalFormCurrentPM">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="modalFormCurrentPM">Update PM</h4>
      </div>
        <form id="frmCurrentPM" class="form-horizontal">
        <div class="modal-body">
              <input type="hidden" name="hdnCurMifId" id='hdnCurMifId' value=''>
              <input type="hidden" name="hdnCurPMId" id='hdnCurPMId' value=''>
              <input type="hidden" name="hdnCurSchedPmNum2" id='hdnCurSchedPmNum2' value=''>
              <input type="hidden" name="hdnCurCompId" id='hdnCurCompId' value=''>
              <input type="hidden" name="hdnCurOldToner" id='hdnCurOldToner' value=''>

              <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-serialnum">S/N:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-serialnum" name="pm-serialnum" disabled="disabled" />
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-brand">Brand:</label>
                <div class="col-sm-6">
                  <!-- <input type="text" class="form-control" id="pm-brand" disabled="disabled"/> -->
                  <select id="pm-brand" class="form-control required" name="pm-brand"></select>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-model">Model:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-model" name="pm-model"/>
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-location">Location:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-location" name="pm-location" />
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-department">Department:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-department" name="pm-department" />
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-no-user">No. of User:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-no-user" name="pm-no-user" />
                </div>
              </div>


               <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-manufacture">Manufacture date:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-manufacture" name="pm-manufacture" autocomplete="off" />
                </div>
              </div>

               <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-remarks">Remarks:</label>
                <div class="col-sm-6">
                  <textarea class="form-control" id="pm-remarks" name="pm-remarks"></textarea>
                </div>
              </div>

               <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-page">Page count:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-page" name="pm-page"/>
                </div>
              </div>

               <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-toner">Toner model use:</label>
                <div class="col-sm-6">
                  <!-- <input type="text" class="form-control" id="pm-toner" name="pm-toner"/> -->
                   <select id="pm-toner" class="chosen-select" name="pm-toner" multiple="true" data-placeholder=" " ></select>
                </div>
              </div>

               <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-date-in">Time in:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-date-in" name="pm-date-in" autocomplete="off"/>
                  <!-- <input type="text" class="form-control" id="pm-time-in" name="pm-time-in" autocomplete="off" /> -->
                </div>
              </div>

               <div class="form-group">
                <label class="col-sm-4 control-label" for="pm-date-out">Time out:</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="pm-date-out" name="pm-date-out" autocomplete="off"/>
                  <!-- <input type="text" class="form-control" id="pm-time-out" name="pm-time-out" autocomplete="off" /> -->
                </div>
              </div>

          </div><!--end of modal body -->
              <div class="modal-footer">
                <div class="col-sm-6 col-xs-12 col-sm-offset-6">
                  <button type="button" class="btn btn-md btn-flat btn-danger" data-dismiss="modal" >Close</button>
                  <button type="submit" class="btn btn-md btn-flat btn-info">Save</button>
                </div>
              </div>
          </form>
    </div>
  </div>
</div>
<script type="text/javascript">
$( document ).ready( function () {

autoDrpDown.getBrandName("#pm-brand");  //Dropdown brand
autoDrpDown.getTonerModel("#pm-toner");   

// Client-side edit form validation.
    $( "#frmCurrentPM" ).validate( {
        onkeyup: false,
        submitHandler: function (form) {
          var id = $("#hdnCurPMId").val() || null;
            if(id == '' || id == null){
               dtCurrentPM.add();
            }
            else {
              dtCurrentPM.update(id);              
            }
        },
       rules: {
            "pm-serialnum": {
              required: true
            },
            "pm-brand": {
              required: true
            },
            "pm-model": {
              required: true
            },
            "pm-manufacture": {
              required: false
            },
            "pm-remarks": {
              required: true
            },
            "pm-page": {
              required: true
            },
            "pm-toner": {
              required: false
            },
            "pm-date-in": {
              required: true
            },
             "pm-date-out": {
              required: false
            }
          },
          messages: {
            "pm-serialnum": {
              required: "This field is required.",
            },
             "pm-brand": {
              required: "This field is required.",
            },
             "pm-model": {
              required: "This field is required.",
            },
            "pm-manufacture": {
              required: "This field is required.",
            },
            "pm-remarks": {
              required: "This field is required.",
            },
            "pm-page": {
              required: "This field is required.",
            },
            "pm-toner": {
              required: "This field is required.",
            } ,
            "pm-date-in": {
              required: "This field is required.",
            } ,
            "pm-date-out": {
              required: "This field is required.",
            } 
        
          },
          errorElement: "em",
          errorPlacement: function ( error, element ) {
            // Add the `help-block` class to the error element
            error.addClass( "help-block" ).css('margin-top','0px');
            error.css({'font-size':'11px','margin-bottom':'0px'});

            if ( element.prop( "type" ) === "checkbox" ) {
              error.insertAfter( element.parent( "label" ) );
            } 
            else {
              error.insertAfter( element );
            }
          },
          highlight: function ( element, errorClass, validClass ) {
            $( element ).parents( ".col-sm-6" ).addClass( "has-error" ).removeClass( "has-success" );
          },
          unhighlight: function (element, errorClass, validClass) {
            $( element ).parents( ".col-sm-6" ).addClass( "has-success" ).removeClass( "has-error" );
        }
      } );
  } );     
</script>